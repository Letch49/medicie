{"id":"7k2v","dependencies":[{"name":"D:\\med\\node_modules\\brain.js\\dist\\recurrent\\gru.js.map","includedInParent":true,"mtime":499162500000},{"name":"D:\\med\\package.json","includedInParent":true,"mtime":1553819528004},{"name":"D:\\med\\.babelrc","includedInParent":true,"mtime":1553726249193},{"name":"D:\\med\\node_modules\\brain.js\\package.json","includedInParent":true,"mtime":1553430479700},{"name":"./matrix","loc":{"line":9,"column":22},"parent":"D:\\med\\node_modules\\brain.js\\dist\\recurrent\\gru.js","resolved":"D:\\med\\node_modules\\brain.js\\dist\\recurrent\\matrix\\index.js"},{"name":"./matrix/random-matrix","loc":{"line":13,"column":28},"parent":"D:\\med\\node_modules\\brain.js\\dist\\recurrent\\gru.js","resolved":"D:\\med\\node_modules\\brain.js\\dist\\recurrent\\matrix\\random-matrix.js"},{"name":"./rnn","loc":{"line":17,"column":19},"parent":"D:\\med\\node_modules\\brain.js\\dist\\recurrent\\gru.js","resolved":"D:\\med\\node_modules\\brain.js\\dist\\recurrent\\rnn.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t=require(\"./matrix\"),n=o(t),r=require(\"./matrix/random-matrix\"),a=o(r),i=require(\"./rnn\"),u=o(i);function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function d(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function f(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(t){function r(){return l(this,r),d(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return f(r,u.default),e(r,[{key:\"getModel\",value:function(e,t){return{updateGateInputMatrix:new a.default(e,t,.08),updateGateHiddenMatrix:new a.default(e,e,.08),updateGateBias:new n.default(e,1),resetGateInputMatrix:new a.default(e,t,.08),resetGateHiddenMatrix:new a.default(e,e,.08),resetGateBias:new n.default(e,1),cellWriteInputMatrix:new a.default(e,t,.08),cellWriteHiddenMatrix:new a.default(e,e,.08),cellWriteBias:new n.default(e,1)}}},{key:\"getEquation\",value:function(e,t,n,r){var a=e.sigmoid.bind(e),i=e.add.bind(e),u=e.multiply.bind(e),o=e.multiplyElement.bind(e),l=e.tanh.bind(e),d=e.allOnes.bind(e),f=e.cloneNegative.bind(e),c=a(i(i(u(r.updateGateInputMatrix,t),u(r.updateGateHiddenMatrix,n)),r.updateGateBias)),p=a(i(i(u(r.resetGateInputMatrix,t),u(r.resetGateHiddenMatrix,n)),r.resetGateBias)),s=l(i(i(u(r.cellWriteInputMatrix,t),u(r.cellWriteHiddenMatrix,o(p,n))),r.cellWriteBias));return i(o(i(d(c.rows,c.columns),f(c)),s),o(n,c))}}]),r}();exports.default=c;","map":{"mappings":[{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":317}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":319}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":327}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":346}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":348}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":356}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":389}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":391}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":399}},{"source":"../../src/recurrent/gru.js","name":"GRU","original":{"line":5,"column":21},"generated":{"line":1,"column":1042}},{"source":"../../src/recurrent/gru.js","name":"RNN","original":{"line":5,"column":33},"generated":{"line":1,"column":1167}},{"source":"../../src/recurrent/gru.js","name":"RNN","original":{"line":5,"column":33},"generated":{"line":1,"column":1169}},{"source":"../../src/recurrent/gru.js","name":"hiddenSize","original":{"line":6,"column":11},"generated":{"line":1,"column":1214}},{"source":"../../src/recurrent/gru.js","name":"prevSize","original":{"line":6,"column":23},"generated":{"line":1,"column":1216}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":7,"column":4},"generated":{"line":1,"column":1219}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":7,"column":11},"generated":{"line":1,"column":1225}},{"source":"../../src/recurrent/gru.js","name":"updateGateInputMatrix","original":{"line":10,"column":6},"generated":{"line":1,"column":1226}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":10,"column":29},"generated":{"line":1,"column":1248}},{"source":"../../src/recurrent/gru.js","name":"RandomMatrix","original":{"line":10,"column":33},"generated":{"line":1,"column":1252}},{"source":"../../src/recurrent/gru.js","name":"RandomMatrix","original":{"line":10,"column":33},"generated":{"line":1,"column":1254}},{"source":"../../src/recurrent/gru.js","name":"hiddenSize","original":{"line":10,"column":46},"generated":{"line":1,"column":1262}},{"source":"../../src/recurrent/gru.js","name":"prevSize","original":{"line":10,"column":58},"generated":{"line":1,"column":1264}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":10,"column":68},"generated":{"line":1,"column":1266}},{"source":"../../src/recurrent/gru.js","name":"updateGateHiddenMatrix","original":{"line":12,"column":6},"generated":{"line":1,"column":1271}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":12,"column":30},"generated":{"line":1,"column":1294}},{"source":"../../src/recurrent/gru.js","name":"RandomMatrix","original":{"line":12,"column":34},"generated":{"line":1,"column":1298}},{"source":"../../src/recurrent/gru.js","name":"RandomMatrix","original":{"line":12,"column":34},"generated":{"line":1,"column":1300}},{"source":"../../src/recurrent/gru.js","name":"hiddenSize","original":{"line":12,"column":47},"generated":{"line":1,"column":1308}},{"source":"../../src/recurrent/gru.js","name":"hiddenSize","original":{"line":12,"column":59},"generated":{"line":1,"column":1310}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":12,"column":71},"generated":{"line":1,"column":1312}},{"source":"../../src/recurrent/gru.js","name":"updateGateBias","original":{"line":14,"column":6},"generated":{"line":1,"column":1317}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":14,"column":22},"generated":{"line":1,"column":1332}},{"source":"../../src/recurrent/gru.js","name":"Matrix","original":{"line":14,"column":26},"generated":{"line":1,"column":1336}},{"source":"../../src/recurrent/gru.js","name":"Matrix","original":{"line":14,"column":26},"generated":{"line":1,"column":1338}},{"source":"../../src/recurrent/gru.js","name":"hiddenSize","original":{"line":14,"column":33},"generated":{"line":1,"column":1346}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":14,"column":45},"generated":{"line":1,"column":1348}},{"source":"../../src/recurrent/gru.js","name":"resetGateInputMatrix","original":{"line":18,"column":6},"generated":{"line":1,"column":1351}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":18,"column":28},"generated":{"line":1,"column":1372}},{"source":"../../src/recurrent/gru.js","name":"RandomMatrix","original":{"line":18,"column":32},"generated":{"line":1,"column":1376}},{"source":"../../src/recurrent/gru.js","name":"RandomMatrix","original":{"line":18,"column":32},"generated":{"line":1,"column":1378}},{"source":"../../src/recurrent/gru.js","name":"hiddenSize","original":{"line":18,"column":45},"generated":{"line":1,"column":1386}},{"source":"../../src/recurrent/gru.js","name":"prevSize","original":{"line":18,"column":57},"generated":{"line":1,"column":1388}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":18,"column":67},"generated":{"line":1,"column":1390}},{"source":"../../src/recurrent/gru.js","name":"resetGateHiddenMatrix","original":{"line":20,"column":6},"generated":{"line":1,"column":1395}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":20,"column":29},"generated":{"line":1,"column":1417}},{"source":"../../src/recurrent/gru.js","name":"RandomMatrix","original":{"line":20,"column":33},"generated":{"line":1,"column":1421}},{"source":"../../src/recurrent/gru.js","name":"RandomMatrix","original":{"line":20,"column":33},"generated":{"line":1,"column":1423}},{"source":"../../src/recurrent/gru.js","name":"hiddenSize","original":{"line":20,"column":46},"generated":{"line":1,"column":1431}},{"source":"../../src/recurrent/gru.js","name":"hiddenSize","original":{"line":20,"column":58},"generated":{"line":1,"column":1433}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":20,"column":70},"generated":{"line":1,"column":1435}},{"source":"../../src/recurrent/gru.js","name":"resetGateBias","original":{"line":22,"column":6},"generated":{"line":1,"column":1440}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":22,"column":21},"generated":{"line":1,"column":1454}},{"source":"../../src/recurrent/gru.js","name":"Matrix","original":{"line":22,"column":25},"generated":{"line":1,"column":1458}},{"source":"../../src/recurrent/gru.js","name":"Matrix","original":{"line":22,"column":25},"generated":{"line":1,"column":1460}},{"source":"../../src/recurrent/gru.js","name":"hiddenSize","original":{"line":22,"column":32},"generated":{"line":1,"column":1468}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":22,"column":44},"generated":{"line":1,"column":1470}},{"source":"../../src/recurrent/gru.js","name":"cellWriteInputMatrix","original":{"line":26,"column":6},"generated":{"line":1,"column":1473}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":26,"column":28},"generated":{"line":1,"column":1494}},{"source":"../../src/recurrent/gru.js","name":"RandomMatrix","original":{"line":26,"column":32},"generated":{"line":1,"column":1498}},{"source":"../../src/recurrent/gru.js","name":"RandomMatrix","original":{"line":26,"column":32},"generated":{"line":1,"column":1500}},{"source":"../../src/recurrent/gru.js","name":"hiddenSize","original":{"line":26,"column":45},"generated":{"line":1,"column":1508}},{"source":"../../src/recurrent/gru.js","name":"prevSize","original":{"line":26,"column":57},"generated":{"line":1,"column":1510}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":26,"column":67},"generated":{"line":1,"column":1512}},{"source":"../../src/recurrent/gru.js","name":"cellWriteHiddenMatrix","original":{"line":28,"column":6},"generated":{"line":1,"column":1517}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":28,"column":29},"generated":{"line":1,"column":1539}},{"source":"../../src/recurrent/gru.js","name":"RandomMatrix","original":{"line":28,"column":33},"generated":{"line":1,"column":1543}},{"source":"../../src/recurrent/gru.js","name":"RandomMatrix","original":{"line":28,"column":33},"generated":{"line":1,"column":1545}},{"source":"../../src/recurrent/gru.js","name":"hiddenSize","original":{"line":28,"column":46},"generated":{"line":1,"column":1553}},{"source":"../../src/recurrent/gru.js","name":"hiddenSize","original":{"line":28,"column":58},"generated":{"line":1,"column":1555}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":28,"column":70},"generated":{"line":1,"column":1557}},{"source":"../../src/recurrent/gru.js","name":"cellWriteBias","original":{"line":30,"column":6},"generated":{"line":1,"column":1562}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":30,"column":21},"generated":{"line":1,"column":1576}},{"source":"../../src/recurrent/gru.js","name":"Matrix","original":{"line":30,"column":25},"generated":{"line":1,"column":1580}},{"source":"../../src/recurrent/gru.js","name":"Matrix","original":{"line":30,"column":25},"generated":{"line":1,"column":1582}},{"source":"../../src/recurrent/gru.js","name":"hiddenSize","original":{"line":30,"column":32},"generated":{"line":1,"column":1590}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":30,"column":44},"generated":{"line":1,"column":1592}},{"source":"../../src/recurrent/gru.js","name":"equation","original":{"line":42,"column":14},"generated":{"line":1,"column":1632}},{"source":"../../src/recurrent/gru.js","name":"inputMatrix","original":{"line":42,"column":24},"generated":{"line":1,"column":1634}},{"source":"../../src/recurrent/gru.js","name":"previousResult","original":{"line":42,"column":37},"generated":{"line":1,"column":1636}},{"source":"../../src/recurrent/gru.js","name":"hiddenLayer","original":{"line":42,"column":53},"generated":{"line":1,"column":1638}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":43,"column":4},"generated":{"line":1,"column":1641}},{"source":"../../src/recurrent/gru.js","name":"sigmoid","original":{"line":43,"column":8},"generated":{"line":1,"column":1645}},{"source":"../../src/recurrent/gru.js","name":"equation","original":{"line":43,"column":18},"generated":{"line":1,"column":1647}},{"source":"../../src/recurrent/gru.js","name":"sigmoid","original":{"line":43,"column":27},"generated":{"line":1,"column":1649}},{"source":"../../src/recurrent/gru.js","name":"bind","original":{"line":43,"column":35},"generated":{"line":1,"column":1657}},{"source":"../../src/recurrent/gru.js","name":"equation","original":{"line":43,"column":40},"generated":{"line":1,"column":1662}},{"source":"../../src/recurrent/gru.js","name":"add","original":{"line":44,"column":8},"generated":{"line":1,"column":1665}},{"source":"../../src/recurrent/gru.js","name":"equation","original":{"line":44,"column":14},"generated":{"line":1,"column":1667}},{"source":"../../src/recurrent/gru.js","name":"add","original":{"line":44,"column":23},"generated":{"line":1,"column":1669}},{"source":"../../src/recurrent/gru.js","name":"bind","original":{"line":44,"column":27},"generated":{"line":1,"column":1673}},{"source":"../../src/recurrent/gru.js","name":"equation","original":{"line":44,"column":32},"generated":{"line":1,"column":1678}},{"source":"../../src/recurrent/gru.js","name":"multiply","original":{"line":45,"column":8},"generated":{"line":1,"column":1681}},{"source":"../../src/recurrent/gru.js","name":"equation","original":{"line":45,"column":19},"generated":{"line":1,"column":1683}},{"source":"../../src/recurrent/gru.js","name":"multiply","original":{"line":45,"column":28},"generated":{"line":1,"column":1685}},{"source":"../../src/recurrent/gru.js","name":"bind","original":{"line":45,"column":37},"generated":{"line":1,"column":1694}},{"source":"../../src/recurrent/gru.js","name":"equation","original":{"line":45,"column":42},"generated":{"line":1,"column":1699}},{"source":"../../src/recurrent/gru.js","name":"multiplyElement","original":{"line":46,"column":8},"generated":{"line":1,"column":1702}},{"source":"../../src/recurrent/gru.js","name":"equation","original":{"line":46,"column":26},"generated":{"line":1,"column":1704}},{"source":"../../src/recurrent/gru.js","name":"multiplyElement","original":{"line":46,"column":35},"generated":{"line":1,"column":1706}},{"source":"../../src/recurrent/gru.js","name":"bind","original":{"line":46,"column":51},"generated":{"line":1,"column":1722}},{"source":"../../src/recurrent/gru.js","name":"equation","original":{"line":46,"column":56},"generated":{"line":1,"column":1727}},{"source":"../../src/recurrent/gru.js","name":"tanh","original":{"line":47,"column":8},"generated":{"line":1,"column":1730}},{"source":"../../src/recurrent/gru.js","name":"equation","original":{"line":47,"column":15},"generated":{"line":1,"column":1732}},{"source":"../../src/recurrent/gru.js","name":"tanh","original":{"line":47,"column":24},"generated":{"line":1,"column":1734}},{"source":"../../src/recurrent/gru.js","name":"bind","original":{"line":47,"column":29},"generated":{"line":1,"column":1739}},{"source":"../../src/recurrent/gru.js","name":"equation","original":{"line":47,"column":34},"generated":{"line":1,"column":1744}},{"source":"../../src/recurrent/gru.js","name":"allOnes","original":{"line":48,"column":8},"generated":{"line":1,"column":1747}},{"source":"../../src/recurrent/gru.js","name":"equation","original":{"line":48,"column":18},"generated":{"line":1,"column":1749}},{"source":"../../src/recurrent/gru.js","name":"allOnes","original":{"line":48,"column":27},"generated":{"line":1,"column":1751}},{"source":"../../src/recurrent/gru.js","name":"bind","original":{"line":48,"column":35},"generated":{"line":1,"column":1759}},{"source":"../../src/recurrent/gru.js","name":"equation","original":{"line":48,"column":40},"generated":{"line":1,"column":1764}},{"source":"../../src/recurrent/gru.js","name":"cloneNegative","original":{"line":49,"column":8},"generated":{"line":1,"column":1767}},{"source":"../../src/recurrent/gru.js","name":"equation","original":{"line":49,"column":24},"generated":{"line":1,"column":1769}},{"source":"../../src/recurrent/gru.js","name":"cloneNegative","original":{"line":49,"column":33},"generated":{"line":1,"column":1771}},{"source":"../../src/recurrent/gru.js","name":"bind","original":{"line":49,"column":47},"generated":{"line":1,"column":1785}},{"source":"../../src/recurrent/gru.js","name":"equation","original":{"line":49,"column":52},"generated":{"line":1,"column":1790}},{"source":"../../src/recurrent/gru.js","name":"updateGate","original":{"line":52,"column":8},"generated":{"line":1,"column":1793}},{"source":"../../src/recurrent/gru.js","name":"sigmoid","original":{"line":52,"column":21},"generated":{"line":1,"column":1795}},{"source":"../../src/recurrent/gru.js","name":"add","original":{"line":53,"column":6},"generated":{"line":1,"column":1797}},{"source":"../../src/recurrent/gru.js","name":"add","original":{"line":54,"column":8},"generated":{"line":1,"column":1799}},{"source":"../../src/recurrent/gru.js","name":"multiply","original":{"line":55,"column":10},"generated":{"line":1,"column":1801}},{"source":"../../src/recurrent/gru.js","name":"hiddenLayer","original":{"line":56,"column":12},"generated":{"line":1,"column":1803}},{"source":"../../src/recurrent/gru.js","name":"updateGateInputMatrix","original":{"line":56,"column":24},"generated":{"line":1,"column":1805}},{"source":"../../src/recurrent/gru.js","name":"inputMatrix","original":{"line":57,"column":12},"generated":{"line":1,"column":1827}},{"source":"../../src/recurrent/gru.js","name":"multiply","original":{"line":59,"column":10},"generated":{"line":1,"column":1830}},{"source":"../../src/recurrent/gru.js","name":"hiddenLayer","original":{"line":60,"column":12},"generated":{"line":1,"column":1832}},{"source":"../../src/recurrent/gru.js","name":"updateGateHiddenMatrix","original":{"line":60,"column":24},"generated":{"line":1,"column":1834}},{"source":"../../src/recurrent/gru.js","name":"previousResult","original":{"line":61,"column":12},"generated":{"line":1,"column":1857}},{"source":"../../src/recurrent/gru.js","name":"hiddenLayer","original":{"line":64,"column":8},"generated":{"line":1,"column":1861}},{"source":"../../src/recurrent/gru.js","name":"updateGateBias","original":{"line":64,"column":20},"generated":{"line":1,"column":1863}},{"source":"../../src/recurrent/gru.js","name":"resetGate","original":{"line":69,"column":8},"generated":{"line":1,"column":1880}},{"source":"../../src/recurrent/gru.js","name":"sigmoid","original":{"line":69,"column":20},"generated":{"line":1,"column":1882}},{"source":"../../src/recurrent/gru.js","name":"add","original":{"line":70,"column":8},"generated":{"line":1,"column":1884}},{"source":"../../src/recurrent/gru.js","name":"add","original":{"line":71,"column":10},"generated":{"line":1,"column":1886}},{"source":"../../src/recurrent/gru.js","name":"multiply","original":{"line":72,"column":12},"generated":{"line":1,"column":1888}},{"source":"../../src/recurrent/gru.js","name":"hiddenLayer","original":{"line":73,"column":14},"generated":{"line":1,"column":1890}},{"source":"../../src/recurrent/gru.js","name":"resetGateInputMatrix","original":{"line":73,"column":26},"generated":{"line":1,"column":1892}},{"source":"../../src/recurrent/gru.js","name":"inputMatrix","original":{"line":74,"column":14},"generated":{"line":1,"column":1913}},{"source":"../../src/recurrent/gru.js","name":"multiply","original":{"line":76,"column":12},"generated":{"line":1,"column":1916}},{"source":"../../src/recurrent/gru.js","name":"hiddenLayer","original":{"line":77,"column":14},"generated":{"line":1,"column":1918}},{"source":"../../src/recurrent/gru.js","name":"resetGateHiddenMatrix","original":{"line":77,"column":26},"generated":{"line":1,"column":1920}},{"source":"../../src/recurrent/gru.js","name":"previousResult","original":{"line":78,"column":14},"generated":{"line":1,"column":1942}},{"source":"../../src/recurrent/gru.js","name":"hiddenLayer","original":{"line":81,"column":10},"generated":{"line":1,"column":1946}},{"source":"../../src/recurrent/gru.js","name":"resetGateBias","original":{"line":81,"column":22},"generated":{"line":1,"column":1948}},{"source":"../../src/recurrent/gru.js","name":"cell","original":{"line":86,"column":8},"generated":{"line":1,"column":1964}},{"source":"../../src/recurrent/gru.js","name":"tanh","original":{"line":86,"column":15},"generated":{"line":1,"column":1966}},{"source":"../../src/recurrent/gru.js","name":"add","original":{"line":87,"column":6},"generated":{"line":1,"column":1968}},{"source":"../../src/recurrent/gru.js","name":"add","original":{"line":88,"column":8},"generated":{"line":1,"column":1970}},{"source":"../../src/recurrent/gru.js","name":"multiply","original":{"line":89,"column":10},"generated":{"line":1,"column":1972}},{"source":"../../src/recurrent/gru.js","name":"hiddenLayer","original":{"line":90,"column":12},"generated":{"line":1,"column":1974}},{"source":"../../src/recurrent/gru.js","name":"cellWriteInputMatrix","original":{"line":90,"column":24},"generated":{"line":1,"column":1976}},{"source":"../../src/recurrent/gru.js","name":"inputMatrix","original":{"line":91,"column":12},"generated":{"line":1,"column":1997}},{"source":"../../src/recurrent/gru.js","name":"multiply","original":{"line":93,"column":10},"generated":{"line":1,"column":2000}},{"source":"../../src/recurrent/gru.js","name":"hiddenLayer","original":{"line":94,"column":12},"generated":{"line":1,"column":2002}},{"source":"../../src/recurrent/gru.js","name":"cellWriteHiddenMatrix","original":{"line":94,"column":24},"generated":{"line":1,"column":2004}},{"source":"../../src/recurrent/gru.js","name":"multiplyElement","original":{"line":95,"column":12},"generated":{"line":1,"column":2026}},{"source":"../../src/recurrent/gru.js","name":"resetGate","original":{"line":96,"column":14},"generated":{"line":1,"column":2028}},{"source":"../../src/recurrent/gru.js","name":"previousResult","original":{"line":97,"column":14},"generated":{"line":1,"column":2030}},{"source":"../../src/recurrent/gru.js","name":"hiddenLayer","original":{"line":101,"column":8},"generated":{"line":1,"column":2035}},{"source":"../../src/recurrent/gru.js","name":"cellWriteBias","original":{"line":101,"column":20},"generated":{"line":1,"column":2037}},{"source":"../../src/recurrent/gru.js","name":null,"original":{"line":107,"column":4},"generated":{"line":1,"column":2053}},{"source":"../../src/recurrent/gru.js","name":"add","original":{"line":107,"column":11},"generated":{"line":1,"column":2060}},{"source":"../../src/recurrent/gru.js","name":"multiplyElement","original":{"line":108,"column":6},"generated":{"line":1,"column":2062}},{"source":"../../src/recurrent/gru.js","name":"add","original":{"line":109,"column":8},"generated":{"line":1,"column":2064}},{"source":"../../src/recurrent/gru.js","name":"allOnes","original":{"line":110,"column":10},"generated":{"line":1,"column":2066}},{"source":"../../src/recurrent/gru.js","name":"updateGate","original":{"line":110,"column":18},"generated":{"line":1,"column":2068}},{"source":"../../src/recurrent/gru.js","name":"rows","original":{"line":110,"column":29},"generated":{"line":1,"column":2070}},{"source":"../../src/recurrent/gru.js","name":"updateGate","original":{"line":110,"column":35},"generated":{"line":1,"column":2075}},{"source":"../../src/recurrent/gru.js","name":"columns","original":{"line":110,"column":46},"generated":{"line":1,"column":2077}},{"source":"../../src/recurrent/gru.js","name":"cloneNegative","original":{"line":111,"column":10},"generated":{"line":1,"column":2086}},{"source":"../../src/recurrent/gru.js","name":"updateGate","original":{"line":111,"column":24},"generated":{"line":1,"column":2088}},{"source":"../../src/recurrent/gru.js","name":"cell","original":{"line":113,"column":8},"generated":{"line":1,"column":2092}},{"source":"../../src/recurrent/gru.js","name":"multiplyElement","original":{"line":115,"column":6},"generated":{"line":1,"column":2095}},{"source":"../../src/recurrent/gru.js","name":"previousResult","original":{"line":116,"column":8},"generated":{"line":1,"column":2097}},{"source":"../../src/recurrent/gru.js","name":"updateGate","original":{"line":117,"column":8},"generated":{"line":1,"column":2099}},{"source":"../../src/recurrent/gru.js","name":"GRU","original":{"line":5,"column":21},"generated":{"line":1,"column":2128}}],"sources":{"../../src/recurrent/gru.js":"import Matrix from './matrix';\nimport RandomMatrix from './matrix/random-matrix';\nimport RNN from './rnn';\n\nexport default class GRU extends RNN {\n  getModel(hiddenSize, prevSize) {\n    return {\n      // update Gate\n      //wzxh\n      updateGateInputMatrix: new RandomMatrix(hiddenSize, prevSize, 0.08),\n      //wzhh\n      updateGateHiddenMatrix: new RandomMatrix(hiddenSize, hiddenSize, 0.08),\n      //bz\n      updateGateBias: new Matrix(hiddenSize, 1),\n\n      // reset Gate\n      //wrxh\n      resetGateInputMatrix: new RandomMatrix(hiddenSize, prevSize, 0.08),\n      //wrhh\n      resetGateHiddenMatrix: new RandomMatrix(hiddenSize, hiddenSize, 0.08),\n      //br\n      resetGateBias: new Matrix(hiddenSize, 1),\n\n      // cell write parameters\n      //wcxh\n      cellWriteInputMatrix: new RandomMatrix(hiddenSize, prevSize, 0.08),\n      //wchh\n      cellWriteHiddenMatrix: new RandomMatrix(hiddenSize, hiddenSize, 0.08),\n      //bc\n      cellWriteBias: new Matrix(hiddenSize, 1)\n    };\n  }\n\n  /**\n   *\n   * @param {Equation} equation\n   * @param {Matrix} inputMatrix\n   * @param {Matrix} previousResult\n   * @param {Object} hiddenLayer\n   * @returns {Matrix}\n   */\n  getEquation(equation, inputMatrix, previousResult, hiddenLayer) {\n    let sigmoid = equation.sigmoid.bind(equation);\n    let add = equation.add.bind(equation);\n    let multiply = equation.multiply.bind(equation);\n    let multiplyElement = equation.multiplyElement.bind(equation);\n    let tanh = equation.tanh.bind(equation);\n    let allOnes = equation.allOnes.bind(equation);\n    let cloneNegative = equation.cloneNegative.bind(equation);\n\n    // update gate\n    let updateGate = sigmoid(\n      add(\n        add(\n          multiply(\n            hiddenLayer.updateGateInputMatrix,\n            inputMatrix\n          ),\n          multiply(\n            hiddenLayer.updateGateHiddenMatrix,\n            previousResult\n          )\n        ),\n        hiddenLayer.updateGateBias\n      )\n    );\n\n    // reset gate\n    let resetGate = sigmoid(\n        add(\n          add(\n            multiply(\n              hiddenLayer.resetGateInputMatrix,\n              inputMatrix\n            ),\n            multiply(\n              hiddenLayer.resetGateHiddenMatrix,\n              previousResult\n            )\n          ),\n          hiddenLayer.resetGateBias\n        )\n    );\n\n    // cell\n    let cell = tanh(\n      add(\n        add(\n          multiply(\n            hiddenLayer.cellWriteInputMatrix,\n            inputMatrix\n          ),\n          multiply(\n            hiddenLayer.cellWriteHiddenMatrix,\n            multiplyElement(\n              resetGate,\n              previousResult\n            )\n          )\n        ),\n        hiddenLayer.cellWriteBias\n      )\n    );\n\n    // compute hidden state as gated, saturated cell activations\n    // negate updateGate\n    return add(\n      multiplyElement(\n        add(\n          allOnes(updateGate.rows, updateGate.columns),\n          cloneNegative(updateGate)\n        ),\n        cell\n      ),\n      multiplyElement(\n        previousResult,\n        updateGate\n      )\n    );\n  }\n}\n"},"lineCount":null}},"hash":"dc8be0f79f5433437a8234728bcde27c","cacheData":{"env":{}}}