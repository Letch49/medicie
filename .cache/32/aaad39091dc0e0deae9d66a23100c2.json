{"id":"ZR5/","dependencies":[{"name":"D:\\med\\node_modules\\brain.js\\dist\\recurrent\\lstm.js.map","includedInParent":true,"mtime":499162500000},{"name":"D:\\med\\package.json","includedInParent":true,"mtime":1553819528004},{"name":"D:\\med\\.babelrc","includedInParent":true,"mtime":1553726249193},{"name":"D:\\med\\node_modules\\brain.js\\package.json","includedInParent":true,"mtime":1553430479700},{"name":"./matrix","loc":{"line":9,"column":22},"parent":"D:\\med\\node_modules\\brain.js\\dist\\recurrent\\lstm.js","resolved":"D:\\med\\node_modules\\brain.js\\dist\\recurrent\\matrix\\index.js"},{"name":"./matrix/random-matrix","loc":{"line":13,"column":28},"parent":"D:\\med\\node_modules\\brain.js\\dist\\recurrent\\lstm.js","resolved":"D:\\med\\node_modules\\brain.js\\dist\\recurrent\\matrix\\random-matrix.js"},{"name":"./rnn","loc":{"line":17,"column":19},"parent":"D:\\med\\node_modules\\brain.js\\dist\\recurrent\\lstm.js","resolved":"D:\\med\\node_modules\\brain.js\\dist\\recurrent\\rnn.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),e=require(\"./matrix\"),n=a(e),i=require(\"./matrix/random-matrix\"),r=a(i),u=require(\"./rnn\"),o=a(u);function a(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function f(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function d(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=function(e){function i(){return l(this,i),f(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return d(i,o.default),t(i,[{key:\"getModel\",value:function(t,e){return{inputMatrix:new r.default(t,e,.08),inputHidden:new r.default(t,t,.08),inputBias:new n.default(t,1),forgetMatrix:new r.default(t,e,.08),forgetHidden:new r.default(t,t,.08),forgetBias:new n.default(t,1),outputMatrix:new r.default(t,e,.08),outputHidden:new r.default(t,t,.08),outputBias:new n.default(t,1),cellActivationMatrix:new r.default(t,e,.08),cellActivationHidden:new r.default(t,t,.08),cellActivationBias:new n.default(t,1)}}},{key:\"getEquation\",value:function(t,e,n,i){var r=t.sigmoid.bind(t),u=t.add.bind(t),o=t.multiply.bind(t),a=t.multiplyElement.bind(t),l=t.tanh.bind(t),f=r(u(u(o(i.inputMatrix,e),o(i.inputHidden,n)),i.inputBias)),d=r(u(u(o(i.forgetMatrix,e),o(i.forgetHidden,n)),i.forgetBias)),c=r(u(u(o(i.outputMatrix,e),o(i.outputHidden,n)),i.outputBias)),p=l(u(u(o(i.cellActivationMatrix,e),o(i.cellActivationHidden,n)),i.cellActivationBias)),s=a(d,n),b=a(f,p);return a(c,l(u(s,b)))}}]),i}();exports.default=c;","map":{"mappings":[{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":317}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":319}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":327}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":346}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":348}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":356}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":389}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":391}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":399}},{"source":"../../src/recurrent/lstm.js","name":"LSTM","original":{"line":5,"column":21},"generated":{"line":1,"column":1042}},{"source":"../../src/recurrent/lstm.js","name":"RNN","original":{"line":5,"column":34},"generated":{"line":1,"column":1167}},{"source":"../../src/recurrent/lstm.js","name":"RNN","original":{"line":5,"column":34},"generated":{"line":1,"column":1169}},{"source":"../../src/recurrent/lstm.js","name":"hiddenSize","original":{"line":6,"column":11},"generated":{"line":1,"column":1214}},{"source":"../../src/recurrent/lstm.js","name":"prevSize","original":{"line":6,"column":23},"generated":{"line":1,"column":1216}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":7,"column":4},"generated":{"line":1,"column":1219}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":7,"column":11},"generated":{"line":1,"column":1225}},{"source":"../../src/recurrent/lstm.js","name":"inputMatrix","original":{"line":10,"column":6},"generated":{"line":1,"column":1226}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":10,"column":19},"generated":{"line":1,"column":1238}},{"source":"../../src/recurrent/lstm.js","name":"RandomMatrix","original":{"line":10,"column":23},"generated":{"line":1,"column":1242}},{"source":"../../src/recurrent/lstm.js","name":"RandomMatrix","original":{"line":10,"column":23},"generated":{"line":1,"column":1244}},{"source":"../../src/recurrent/lstm.js","name":"hiddenSize","original":{"line":10,"column":36},"generated":{"line":1,"column":1252}},{"source":"../../src/recurrent/lstm.js","name":"prevSize","original":{"line":10,"column":48},"generated":{"line":1,"column":1254}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":10,"column":58},"generated":{"line":1,"column":1256}},{"source":"../../src/recurrent/lstm.js","name":"inputHidden","original":{"line":12,"column":6},"generated":{"line":1,"column":1261}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":12,"column":19},"generated":{"line":1,"column":1273}},{"source":"../../src/recurrent/lstm.js","name":"RandomMatrix","original":{"line":12,"column":23},"generated":{"line":1,"column":1277}},{"source":"../../src/recurrent/lstm.js","name":"RandomMatrix","original":{"line":12,"column":23},"generated":{"line":1,"column":1279}},{"source":"../../src/recurrent/lstm.js","name":"hiddenSize","original":{"line":12,"column":36},"generated":{"line":1,"column":1287}},{"source":"../../src/recurrent/lstm.js","name":"hiddenSize","original":{"line":12,"column":48},"generated":{"line":1,"column":1289}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":12,"column":60},"generated":{"line":1,"column":1291}},{"source":"../../src/recurrent/lstm.js","name":"inputBias","original":{"line":14,"column":6},"generated":{"line":1,"column":1296}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":14,"column":17},"generated":{"line":1,"column":1306}},{"source":"../../src/recurrent/lstm.js","name":"Matrix","original":{"line":14,"column":21},"generated":{"line":1,"column":1310}},{"source":"../../src/recurrent/lstm.js","name":"Matrix","original":{"line":14,"column":21},"generated":{"line":1,"column":1312}},{"source":"../../src/recurrent/lstm.js","name":"hiddenSize","original":{"line":14,"column":28},"generated":{"line":1,"column":1320}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":14,"column":40},"generated":{"line":1,"column":1322}},{"source":"../../src/recurrent/lstm.js","name":"forgetMatrix","original":{"line":17,"column":6},"generated":{"line":1,"column":1325}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":17,"column":20},"generated":{"line":1,"column":1338}},{"source":"../../src/recurrent/lstm.js","name":"RandomMatrix","original":{"line":17,"column":24},"generated":{"line":1,"column":1342}},{"source":"../../src/recurrent/lstm.js","name":"RandomMatrix","original":{"line":17,"column":24},"generated":{"line":1,"column":1344}},{"source":"../../src/recurrent/lstm.js","name":"hiddenSize","original":{"line":17,"column":37},"generated":{"line":1,"column":1352}},{"source":"../../src/recurrent/lstm.js","name":"prevSize","original":{"line":17,"column":49},"generated":{"line":1,"column":1354}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":17,"column":59},"generated":{"line":1,"column":1356}},{"source":"../../src/recurrent/lstm.js","name":"forgetHidden","original":{"line":19,"column":6},"generated":{"line":1,"column":1361}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":19,"column":20},"generated":{"line":1,"column":1374}},{"source":"../../src/recurrent/lstm.js","name":"RandomMatrix","original":{"line":19,"column":24},"generated":{"line":1,"column":1378}},{"source":"../../src/recurrent/lstm.js","name":"RandomMatrix","original":{"line":19,"column":24},"generated":{"line":1,"column":1380}},{"source":"../../src/recurrent/lstm.js","name":"hiddenSize","original":{"line":19,"column":37},"generated":{"line":1,"column":1388}},{"source":"../../src/recurrent/lstm.js","name":"hiddenSize","original":{"line":19,"column":49},"generated":{"line":1,"column":1390}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":19,"column":61},"generated":{"line":1,"column":1392}},{"source":"../../src/recurrent/lstm.js","name":"forgetBias","original":{"line":21,"column":6},"generated":{"line":1,"column":1397}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":21,"column":18},"generated":{"line":1,"column":1408}},{"source":"../../src/recurrent/lstm.js","name":"Matrix","original":{"line":21,"column":22},"generated":{"line":1,"column":1412}},{"source":"../../src/recurrent/lstm.js","name":"Matrix","original":{"line":21,"column":22},"generated":{"line":1,"column":1414}},{"source":"../../src/recurrent/lstm.js","name":"hiddenSize","original":{"line":21,"column":29},"generated":{"line":1,"column":1422}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":21,"column":41},"generated":{"line":1,"column":1424}},{"source":"../../src/recurrent/lstm.js","name":"outputMatrix","original":{"line":24,"column":6},"generated":{"line":1,"column":1427}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":24,"column":20},"generated":{"line":1,"column":1440}},{"source":"../../src/recurrent/lstm.js","name":"RandomMatrix","original":{"line":24,"column":24},"generated":{"line":1,"column":1444}},{"source":"../../src/recurrent/lstm.js","name":"RandomMatrix","original":{"line":24,"column":24},"generated":{"line":1,"column":1446}},{"source":"../../src/recurrent/lstm.js","name":"hiddenSize","original":{"line":24,"column":37},"generated":{"line":1,"column":1454}},{"source":"../../src/recurrent/lstm.js","name":"prevSize","original":{"line":24,"column":49},"generated":{"line":1,"column":1456}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":24,"column":59},"generated":{"line":1,"column":1458}},{"source":"../../src/recurrent/lstm.js","name":"outputHidden","original":{"line":26,"column":6},"generated":{"line":1,"column":1463}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":26,"column":20},"generated":{"line":1,"column":1476}},{"source":"../../src/recurrent/lstm.js","name":"RandomMatrix","original":{"line":26,"column":24},"generated":{"line":1,"column":1480}},{"source":"../../src/recurrent/lstm.js","name":"RandomMatrix","original":{"line":26,"column":24},"generated":{"line":1,"column":1482}},{"source":"../../src/recurrent/lstm.js","name":"hiddenSize","original":{"line":26,"column":37},"generated":{"line":1,"column":1490}},{"source":"../../src/recurrent/lstm.js","name":"hiddenSize","original":{"line":26,"column":49},"generated":{"line":1,"column":1492}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":26,"column":61},"generated":{"line":1,"column":1494}},{"source":"../../src/recurrent/lstm.js","name":"outputBias","original":{"line":28,"column":6},"generated":{"line":1,"column":1499}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":28,"column":18},"generated":{"line":1,"column":1510}},{"source":"../../src/recurrent/lstm.js","name":"Matrix","original":{"line":28,"column":22},"generated":{"line":1,"column":1514}},{"source":"../../src/recurrent/lstm.js","name":"Matrix","original":{"line":28,"column":22},"generated":{"line":1,"column":1516}},{"source":"../../src/recurrent/lstm.js","name":"hiddenSize","original":{"line":28,"column":29},"generated":{"line":1,"column":1524}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":28,"column":41},"generated":{"line":1,"column":1526}},{"source":"../../src/recurrent/lstm.js","name":"cellActivationMatrix","original":{"line":32,"column":6},"generated":{"line":1,"column":1529}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":32,"column":28},"generated":{"line":1,"column":1550}},{"source":"../../src/recurrent/lstm.js","name":"RandomMatrix","original":{"line":32,"column":32},"generated":{"line":1,"column":1554}},{"source":"../../src/recurrent/lstm.js","name":"RandomMatrix","original":{"line":32,"column":32},"generated":{"line":1,"column":1556}},{"source":"../../src/recurrent/lstm.js","name":"hiddenSize","original":{"line":32,"column":45},"generated":{"line":1,"column":1564}},{"source":"../../src/recurrent/lstm.js","name":"prevSize","original":{"line":32,"column":57},"generated":{"line":1,"column":1566}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":32,"column":67},"generated":{"line":1,"column":1568}},{"source":"../../src/recurrent/lstm.js","name":"cellActivationHidden","original":{"line":34,"column":6},"generated":{"line":1,"column":1573}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":34,"column":28},"generated":{"line":1,"column":1594}},{"source":"../../src/recurrent/lstm.js","name":"RandomMatrix","original":{"line":34,"column":32},"generated":{"line":1,"column":1598}},{"source":"../../src/recurrent/lstm.js","name":"RandomMatrix","original":{"line":34,"column":32},"generated":{"line":1,"column":1600}},{"source":"../../src/recurrent/lstm.js","name":"hiddenSize","original":{"line":34,"column":45},"generated":{"line":1,"column":1608}},{"source":"../../src/recurrent/lstm.js","name":"hiddenSize","original":{"line":34,"column":57},"generated":{"line":1,"column":1610}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":34,"column":69},"generated":{"line":1,"column":1612}},{"source":"../../src/recurrent/lstm.js","name":"cellActivationBias","original":{"line":36,"column":6},"generated":{"line":1,"column":1617}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":36,"column":26},"generated":{"line":1,"column":1636}},{"source":"../../src/recurrent/lstm.js","name":"Matrix","original":{"line":36,"column":30},"generated":{"line":1,"column":1640}},{"source":"../../src/recurrent/lstm.js","name":"Matrix","original":{"line":36,"column":30},"generated":{"line":1,"column":1642}},{"source":"../../src/recurrent/lstm.js","name":"hiddenSize","original":{"line":36,"column":37},"generated":{"line":1,"column":1650}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":36,"column":49},"generated":{"line":1,"column":1652}},{"source":"../../src/recurrent/lstm.js","name":"equation","original":{"line":48,"column":14},"generated":{"line":1,"column":1692}},{"source":"../../src/recurrent/lstm.js","name":"inputMatrix","original":{"line":48,"column":24},"generated":{"line":1,"column":1694}},{"source":"../../src/recurrent/lstm.js","name":"previousResult","original":{"line":48,"column":37},"generated":{"line":1,"column":1696}},{"source":"../../src/recurrent/lstm.js","name":"hiddenLayer","original":{"line":48,"column":53},"generated":{"line":1,"column":1698}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":49,"column":4},"generated":{"line":1,"column":1701}},{"source":"../../src/recurrent/lstm.js","name":"sigmoid","original":{"line":49,"column":8},"generated":{"line":1,"column":1705}},{"source":"../../src/recurrent/lstm.js","name":"equation","original":{"line":49,"column":18},"generated":{"line":1,"column":1707}},{"source":"../../src/recurrent/lstm.js","name":"sigmoid","original":{"line":49,"column":27},"generated":{"line":1,"column":1709}},{"source":"../../src/recurrent/lstm.js","name":"bind","original":{"line":49,"column":35},"generated":{"line":1,"column":1717}},{"source":"../../src/recurrent/lstm.js","name":"equation","original":{"line":49,"column":40},"generated":{"line":1,"column":1722}},{"source":"../../src/recurrent/lstm.js","name":"add","original":{"line":50,"column":8},"generated":{"line":1,"column":1725}},{"source":"../../src/recurrent/lstm.js","name":"equation","original":{"line":50,"column":14},"generated":{"line":1,"column":1727}},{"source":"../../src/recurrent/lstm.js","name":"add","original":{"line":50,"column":23},"generated":{"line":1,"column":1729}},{"source":"../../src/recurrent/lstm.js","name":"bind","original":{"line":50,"column":27},"generated":{"line":1,"column":1733}},{"source":"../../src/recurrent/lstm.js","name":"equation","original":{"line":50,"column":32},"generated":{"line":1,"column":1738}},{"source":"../../src/recurrent/lstm.js","name":"multiply","original":{"line":51,"column":8},"generated":{"line":1,"column":1741}},{"source":"../../src/recurrent/lstm.js","name":"equation","original":{"line":51,"column":19},"generated":{"line":1,"column":1743}},{"source":"../../src/recurrent/lstm.js","name":"multiply","original":{"line":51,"column":28},"generated":{"line":1,"column":1745}},{"source":"../../src/recurrent/lstm.js","name":"bind","original":{"line":51,"column":37},"generated":{"line":1,"column":1754}},{"source":"../../src/recurrent/lstm.js","name":"equation","original":{"line":51,"column":42},"generated":{"line":1,"column":1759}},{"source":"../../src/recurrent/lstm.js","name":"multiplyElement","original":{"line":52,"column":8},"generated":{"line":1,"column":1762}},{"source":"../../src/recurrent/lstm.js","name":"equation","original":{"line":52,"column":26},"generated":{"line":1,"column":1764}},{"source":"../../src/recurrent/lstm.js","name":"multiplyElement","original":{"line":52,"column":35},"generated":{"line":1,"column":1766}},{"source":"../../src/recurrent/lstm.js","name":"bind","original":{"line":52,"column":51},"generated":{"line":1,"column":1782}},{"source":"../../src/recurrent/lstm.js","name":"equation","original":{"line":52,"column":56},"generated":{"line":1,"column":1787}},{"source":"../../src/recurrent/lstm.js","name":"tanh","original":{"line":53,"column":8},"generated":{"line":1,"column":1790}},{"source":"../../src/recurrent/lstm.js","name":"equation","original":{"line":53,"column":15},"generated":{"line":1,"column":1792}},{"source":"../../src/recurrent/lstm.js","name":"tanh","original":{"line":53,"column":24},"generated":{"line":1,"column":1794}},{"source":"../../src/recurrent/lstm.js","name":"bind","original":{"line":53,"column":29},"generated":{"line":1,"column":1799}},{"source":"../../src/recurrent/lstm.js","name":"equation","original":{"line":53,"column":34},"generated":{"line":1,"column":1804}},{"source":"../../src/recurrent/lstm.js","name":"inputGate","original":{"line":55,"column":8},"generated":{"line":1,"column":1807}},{"source":"../../src/recurrent/lstm.js","name":"sigmoid","original":{"line":55,"column":20},"generated":{"line":1,"column":1809}},{"source":"../../src/recurrent/lstm.js","name":"add","original":{"line":56,"column":6},"generated":{"line":1,"column":1811}},{"source":"../../src/recurrent/lstm.js","name":"add","original":{"line":57,"column":8},"generated":{"line":1,"column":1813}},{"source":"../../src/recurrent/lstm.js","name":"multiply","original":{"line":58,"column":10},"generated":{"line":1,"column":1815}},{"source":"../../src/recurrent/lstm.js","name":"hiddenLayer","original":{"line":59,"column":12},"generated":{"line":1,"column":1817}},{"source":"../../src/recurrent/lstm.js","name":"inputMatrix","original":{"line":59,"column":24},"generated":{"line":1,"column":1819}},{"source":"../../src/recurrent/lstm.js","name":"inputMatrix","original":{"line":60,"column":12},"generated":{"line":1,"column":1831}},{"source":"../../src/recurrent/lstm.js","name":"multiply","original":{"line":62,"column":10},"generated":{"line":1,"column":1834}},{"source":"../../src/recurrent/lstm.js","name":"hiddenLayer","original":{"line":63,"column":12},"generated":{"line":1,"column":1836}},{"source":"../../src/recurrent/lstm.js","name":"inputHidden","original":{"line":63,"column":24},"generated":{"line":1,"column":1838}},{"source":"../../src/recurrent/lstm.js","name":"previousResult","original":{"line":64,"column":12},"generated":{"line":1,"column":1850}},{"source":"../../src/recurrent/lstm.js","name":"hiddenLayer","original":{"line":67,"column":8},"generated":{"line":1,"column":1854}},{"source":"../../src/recurrent/lstm.js","name":"inputBias","original":{"line":67,"column":20},"generated":{"line":1,"column":1856}},{"source":"../../src/recurrent/lstm.js","name":"forgetGate","original":{"line":71,"column":8},"generated":{"line":1,"column":1868}},{"source":"../../src/recurrent/lstm.js","name":"sigmoid","original":{"line":71,"column":21},"generated":{"line":1,"column":1870}},{"source":"../../src/recurrent/lstm.js","name":"add","original":{"line":72,"column":6},"generated":{"line":1,"column":1872}},{"source":"../../src/recurrent/lstm.js","name":"add","original":{"line":73,"column":8},"generated":{"line":1,"column":1874}},{"source":"../../src/recurrent/lstm.js","name":"multiply","original":{"line":74,"column":10},"generated":{"line":1,"column":1876}},{"source":"../../src/recurrent/lstm.js","name":"hiddenLayer","original":{"line":75,"column":12},"generated":{"line":1,"column":1878}},{"source":"../../src/recurrent/lstm.js","name":"forgetMatrix","original":{"line":75,"column":24},"generated":{"line":1,"column":1880}},{"source":"../../src/recurrent/lstm.js","name":"inputMatrix","original":{"line":76,"column":12},"generated":{"line":1,"column":1893}},{"source":"../../src/recurrent/lstm.js","name":"multiply","original":{"line":78,"column":10},"generated":{"line":1,"column":1896}},{"source":"../../src/recurrent/lstm.js","name":"hiddenLayer","original":{"line":79,"column":12},"generated":{"line":1,"column":1898}},{"source":"../../src/recurrent/lstm.js","name":"forgetHidden","original":{"line":79,"column":24},"generated":{"line":1,"column":1900}},{"source":"../../src/recurrent/lstm.js","name":"previousResult","original":{"line":80,"column":12},"generated":{"line":1,"column":1913}},{"source":"../../src/recurrent/lstm.js","name":"hiddenLayer","original":{"line":83,"column":8},"generated":{"line":1,"column":1917}},{"source":"../../src/recurrent/lstm.js","name":"forgetBias","original":{"line":83,"column":20},"generated":{"line":1,"column":1919}},{"source":"../../src/recurrent/lstm.js","name":"outputGate","original":{"line":88,"column":8},"generated":{"line":1,"column":1932}},{"source":"../../src/recurrent/lstm.js","name":"sigmoid","original":{"line":88,"column":21},"generated":{"line":1,"column":1934}},{"source":"../../src/recurrent/lstm.js","name":"add","original":{"line":89,"column":6},"generated":{"line":1,"column":1936}},{"source":"../../src/recurrent/lstm.js","name":"add","original":{"line":90,"column":8},"generated":{"line":1,"column":1938}},{"source":"../../src/recurrent/lstm.js","name":"multiply","original":{"line":91,"column":10},"generated":{"line":1,"column":1940}},{"source":"../../src/recurrent/lstm.js","name":"hiddenLayer","original":{"line":92,"column":12},"generated":{"line":1,"column":1942}},{"source":"../../src/recurrent/lstm.js","name":"outputMatrix","original":{"line":92,"column":24},"generated":{"line":1,"column":1944}},{"source":"../../src/recurrent/lstm.js","name":"inputMatrix","original":{"line":93,"column":12},"generated":{"line":1,"column":1957}},{"source":"../../src/recurrent/lstm.js","name":"multiply","original":{"line":95,"column":10},"generated":{"line":1,"column":1960}},{"source":"../../src/recurrent/lstm.js","name":"hiddenLayer","original":{"line":96,"column":12},"generated":{"line":1,"column":1962}},{"source":"../../src/recurrent/lstm.js","name":"outputHidden","original":{"line":96,"column":24},"generated":{"line":1,"column":1964}},{"source":"../../src/recurrent/lstm.js","name":"previousResult","original":{"line":97,"column":12},"generated":{"line":1,"column":1977}},{"source":"../../src/recurrent/lstm.js","name":"hiddenLayer","original":{"line":100,"column":8},"generated":{"line":1,"column":1981}},{"source":"../../src/recurrent/lstm.js","name":"outputBias","original":{"line":100,"column":20},"generated":{"line":1,"column":1983}},{"source":"../../src/recurrent/lstm.js","name":"cellWrite","original":{"line":105,"column":8},"generated":{"line":1,"column":1996}},{"source":"../../src/recurrent/lstm.js","name":"tanh","original":{"line":105,"column":20},"generated":{"line":1,"column":1998}},{"source":"../../src/recurrent/lstm.js","name":"add","original":{"line":106,"column":6},"generated":{"line":1,"column":2000}},{"source":"../../src/recurrent/lstm.js","name":"add","original":{"line":107,"column":8},"generated":{"line":1,"column":2002}},{"source":"../../src/recurrent/lstm.js","name":"multiply","original":{"line":108,"column":10},"generated":{"line":1,"column":2004}},{"source":"../../src/recurrent/lstm.js","name":"hiddenLayer","original":{"line":109,"column":12},"generated":{"line":1,"column":2006}},{"source":"../../src/recurrent/lstm.js","name":"cellActivationMatrix","original":{"line":109,"column":24},"generated":{"line":1,"column":2008}},{"source":"../../src/recurrent/lstm.js","name":"inputMatrix","original":{"line":110,"column":12},"generated":{"line":1,"column":2029}},{"source":"../../src/recurrent/lstm.js","name":"multiply","original":{"line":112,"column":10},"generated":{"line":1,"column":2032}},{"source":"../../src/recurrent/lstm.js","name":"hiddenLayer","original":{"line":113,"column":12},"generated":{"line":1,"column":2034}},{"source":"../../src/recurrent/lstm.js","name":"cellActivationHidden","original":{"line":113,"column":24},"generated":{"line":1,"column":2036}},{"source":"../../src/recurrent/lstm.js","name":"previousResult","original":{"line":114,"column":12},"generated":{"line":1,"column":2057}},{"source":"../../src/recurrent/lstm.js","name":"hiddenLayer","original":{"line":117,"column":8},"generated":{"line":1,"column":2061}},{"source":"../../src/recurrent/lstm.js","name":"cellActivationBias","original":{"line":117,"column":20},"generated":{"line":1,"column":2063}},{"source":"../../src/recurrent/lstm.js","name":"retainCell","original":{"line":122,"column":8},"generated":{"line":1,"column":2084}},{"source":"../../src/recurrent/lstm.js","name":"multiplyElement","original":{"line":122,"column":21},"generated":{"line":1,"column":2086}},{"source":"../../src/recurrent/lstm.js","name":"forgetGate","original":{"line":122,"column":37},"generated":{"line":1,"column":2088}},{"source":"../../src/recurrent/lstm.js","name":"previousResult","original":{"line":122,"column":49},"generated":{"line":1,"column":2090}},{"source":"../../src/recurrent/lstm.js","name":"writeCell","original":{"line":123,"column":8},"generated":{"line":1,"column":2093}},{"source":"../../src/recurrent/lstm.js","name":"multiplyElement","original":{"line":123,"column":20},"generated":{"line":1,"column":2095}},{"source":"../../src/recurrent/lstm.js","name":"inputGate","original":{"line":123,"column":36},"generated":{"line":1,"column":2097}},{"source":"../../src/recurrent/lstm.js","name":"cellWrite","original":{"line":123,"column":47},"generated":{"line":1,"column":2099}},{"source":"../../src/recurrent/lstm.js","name":null,"original":{"line":127,"column":4},"generated":{"line":1,"column":2102}},{"source":"../../src/recurrent/lstm.js","name":"multiplyElement","original":{"line":127,"column":11},"generated":{"line":1,"column":2109}},{"source":"../../src/recurrent/lstm.js","name":"outputGate","original":{"line":128,"column":6},"generated":{"line":1,"column":2111}},{"source":"../../src/recurrent/lstm.js","name":"tanh","original":{"line":129,"column":6},"generated":{"line":1,"column":2113}},{"source":"../../src/recurrent/lstm.js","name":"add","original":{"line":124,"column":15},"generated":{"line":1,"column":2115}},{"source":"../../src/recurrent/lstm.js","name":"retainCell","original":{"line":124,"column":19},"generated":{"line":1,"column":2117}},{"source":"../../src/recurrent/lstm.js","name":"writeCell","original":{"line":124,"column":31},"generated":{"line":1,"column":2119}},{"source":"../../src/recurrent/lstm.js","name":"LSTM","original":{"line":5,"column":21},"generated":{"line":1,"column":2149}}],"sources":{"../../src/recurrent/lstm.js":"import Matrix from './matrix';\nimport RandomMatrix from './matrix/random-matrix';\nimport RNN from './rnn';\n\nexport default class LSTM extends RNN {\n  getModel(hiddenSize, prevSize) {\n    return {\n      // gates parameters\n      //wix\n      inputMatrix: new RandomMatrix(hiddenSize, prevSize, 0.08),\n      //wih\n      inputHidden: new RandomMatrix(hiddenSize, hiddenSize, 0.08),\n      //bi\n      inputBias: new Matrix(hiddenSize, 1),\n\n      //wfx\n      forgetMatrix: new RandomMatrix(hiddenSize, prevSize, 0.08),\n      //wfh\n      forgetHidden: new RandomMatrix(hiddenSize, hiddenSize, 0.08),\n      //bf\n      forgetBias: new Matrix(hiddenSize, 1),\n\n      //wox\n      outputMatrix: new RandomMatrix(hiddenSize, prevSize, 0.08),\n      //woh\n      outputHidden: new RandomMatrix(hiddenSize, hiddenSize, 0.08),\n      //bo\n      outputBias: new Matrix(hiddenSize, 1),\n\n      // cell write params\n      //wcx\n      cellActivationMatrix: new RandomMatrix(hiddenSize, prevSize, 0.08),\n      //wch\n      cellActivationHidden: new RandomMatrix(hiddenSize, hiddenSize, 0.08),\n      //bc\n      cellActivationBias: new Matrix(hiddenSize, 1)\n    };\n  }\n\n  /**\n   *\n   * @param {Equation} equation\n   * @param {Matrix} inputMatrix\n   * @param {Matrix} previousResult\n   * @param {Object} hiddenLayer\n   * @returns {Matrix}\n   */\n  getEquation(equation, inputMatrix, previousResult, hiddenLayer) {\n    let sigmoid = equation.sigmoid.bind(equation);\n    let add = equation.add.bind(equation);\n    let multiply = equation.multiply.bind(equation);\n    let multiplyElement = equation.multiplyElement.bind(equation);\n    let tanh = equation.tanh.bind(equation);\n\n    let inputGate = sigmoid(\n      add(\n        add(\n          multiply(\n            hiddenLayer.inputMatrix,\n            inputMatrix\n          ),\n          multiply(\n            hiddenLayer.inputHidden,\n            previousResult\n          )\n        ),\n        hiddenLayer.inputBias\n      )\n    );\n\n    let forgetGate = sigmoid(\n      add(\n        add(\n          multiply(\n            hiddenLayer.forgetMatrix,\n            inputMatrix\n          ),\n          multiply(\n            hiddenLayer.forgetHidden,\n            previousResult\n          )\n        ),\n        hiddenLayer.forgetBias\n      )\n    );\n\n    // output gate\n    let outputGate = sigmoid(\n      add(\n        add(\n          multiply(\n            hiddenLayer.outputMatrix,\n            inputMatrix\n          ),\n          multiply(\n            hiddenLayer.outputHidden,\n            previousResult\n          )\n        ),\n        hiddenLayer.outputBias\n      )\n    );\n\n    // write operation on cells\n    let cellWrite = tanh(\n      add(\n        add(\n          multiply(\n            hiddenLayer.cellActivationMatrix,\n            inputMatrix\n          ),\n          multiply(\n            hiddenLayer.cellActivationHidden,\n            previousResult\n          )\n        ),\n        hiddenLayer.cellActivationBias\n      )\n    );\n\n    // compute new cell activation\n    let retainCell = multiplyElement(forgetGate, previousResult); // what do we keep from cell\n    let writeCell = multiplyElement(inputGate, cellWrite); // what do we write to cell\n    let cell = add(retainCell, writeCell); // new cell contents\n\n    // compute hidden state as gated, saturated cell activations\n    return multiplyElement(\n      outputGate,\n      tanh(cell)\n    );\n  }\n}\n"},"lineCount":null}},"hash":"610ee5fdfc3d7b54409a6ff37773b60b","cacheData":{"env":{}}}