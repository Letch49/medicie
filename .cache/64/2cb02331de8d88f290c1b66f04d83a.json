{"id":"/hSy","dependencies":[{"name":"D:\\med\\node_modules\\brain.js\\dist\\recurrent\\matrix\\softmax.js.map","includedInParent":true,"mtime":499162500000},{"name":"D:\\med\\package.json","includedInParent":true,"mtime":1553819528004},{"name":"D:\\med\\.babelrc","includedInParent":true,"mtime":1553726249193},{"name":"D:\\med\\node_modules\\brain.js\\package.json","includedInParent":true,"mtime":1553430479700},{"name":"./","loc":{"line":8,"column":16},"parent":"D:\\med\\node_modules\\brain.js\\dist\\recurrent\\matrix\\softmax.js","resolved":"D:\\med\\node_modules\\brain.js\\dist\\recurrent\\matrix\\index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=s;var e=require(\"./\"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}function s(e){for(var r=new t.default(e.rows,e.columns),s=-999999,i=0;i<e.weights.length;i++)e.weights[i]>s&&(s=e.weights[i]);for(var h=0,u=0;u<e.weights.length;u++)r.weights[u]=Math.exp(e.weights[u]-s),h+=r.weights[u];for(var g=0;g<e.weights.length;g++)r.weights[g]/=h;return r}","map":{"mappings":[{"source":"../../../src/recurrent/matrix/softmax.js","name":"softmax","original":{"line":8,"column":24},"generated":{"line":1,"column":84}},{"source":"../../../src/recurrent/matrix/softmax.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":86}},{"source":"../../../src/recurrent/matrix/softmax.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":90}},{"source":"../../../src/recurrent/matrix/softmax.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"../../../src/recurrent/matrix/softmax.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":100}},{"source":"../../../src/recurrent/matrix/softmax.js","name":null,"original":{"line":8,"column":15},"generated":{"line":1,"column":164}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"softmax","original":{"line":8,"column":24},"generated":{"line":1,"column":173}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"m","original":{"line":8,"column":32},"generated":{"line":1,"column":175}},{"source":"../../../src/recurrent/matrix/softmax.js","name":null,"original":{"line":11,"column":2},"generated":{"line":1,"column":178}},{"source":"../../../src/recurrent/matrix/softmax.js","name":null,"original":{"line":9,"column":2},"generated":{"line":1,"column":182}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"result","original":{"line":9,"column":6},"generated":{"line":1,"column":186}},{"source":"../../../src/recurrent/matrix/softmax.js","name":null,"original":{"line":9,"column":15},"generated":{"line":1,"column":188}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"Matrix","original":{"line":9,"column":19},"generated":{"line":1,"column":192}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"Matrix","original":{"line":9,"column":19},"generated":{"line":1,"column":194}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"m","original":{"line":9,"column":26},"generated":{"line":1,"column":202}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"rows","original":{"line":9,"column":28},"generated":{"line":1,"column":204}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"m","original":{"line":9,"column":34},"generated":{"line":1,"column":209}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"columns","original":{"line":9,"column":36},"generated":{"line":1,"column":211}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"maxVal","original":{"line":10,"column":6},"generated":{"line":1,"column":220}},{"source":"../../../src/recurrent/matrix/softmax.js","name":null,"original":{"line":10,"column":16},"generated":{"line":1,"column":223}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"i","original":{"line":11,"column":11},"generated":{"line":1,"column":230}},{"source":"../../../src/recurrent/matrix/softmax.js","name":null,"original":{"line":11,"column":15},"generated":{"line":1,"column":232}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"i","original":{"line":11,"column":18},"generated":{"line":1,"column":234}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"m","original":{"line":11,"column":22},"generated":{"line":1,"column":236}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"weights","original":{"line":11,"column":24},"generated":{"line":1,"column":238}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"length","original":{"line":11,"column":32},"generated":{"line":1,"column":246}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"i","original":{"line":11,"column":40},"generated":{"line":1,"column":253}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"m","original":{"line":12,"column":7},"generated":{"line":1,"column":257}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"weights","original":{"line":12,"column":9},"generated":{"line":1,"column":259}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"i","original":{"line":12,"column":17},"generated":{"line":1,"column":267}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"maxVal","original":{"line":12,"column":22},"generated":{"line":1,"column":270}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"maxVal","original":{"line":13,"column":6},"generated":{"line":1,"column":274}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"m","original":{"line":13,"column":15},"generated":{"line":1,"column":276}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"weights","original":{"line":13,"column":17},"generated":{"line":1,"column":278}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"i","original":{"line":13,"column":25},"generated":{"line":1,"column":286}},{"source":"../../../src/recurrent/matrix/softmax.js","name":null,"original":{"line":18,"column":2},"generated":{"line":1,"column":290}},{"source":"../../../src/recurrent/matrix/softmax.js","name":null,"original":{"line":17,"column":2},"generated":{"line":1,"column":294}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"s","original":{"line":17,"column":6},"generated":{"line":1,"column":298}},{"source":"../../../src/recurrent/matrix/softmax.js","name":null,"original":{"line":17,"column":10},"generated":{"line":1,"column":300}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"i","original":{"line":18,"column":11},"generated":{"line":1,"column":302}},{"source":"../../../src/recurrent/matrix/softmax.js","name":null,"original":{"line":18,"column":15},"generated":{"line":1,"column":304}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"i","original":{"line":18,"column":18},"generated":{"line":1,"column":306}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"m","original":{"line":18,"column":22},"generated":{"line":1,"column":308}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"weights","original":{"line":18,"column":24},"generated":{"line":1,"column":310}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"length","original":{"line":18,"column":32},"generated":{"line":1,"column":318}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"i","original":{"line":18,"column":40},"generated":{"line":1,"column":325}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"result","original":{"line":19,"column":4},"generated":{"line":1,"column":329}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"weights","original":{"line":19,"column":11},"generated":{"line":1,"column":331}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"i","original":{"line":19,"column":19},"generated":{"line":1,"column":339}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"Math","original":{"line":19,"column":24},"generated":{"line":1,"column":342}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"exp","original":{"line":19,"column":29},"generated":{"line":1,"column":347}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"m","original":{"line":19,"column":33},"generated":{"line":1,"column":351}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"weights","original":{"line":19,"column":35},"generated":{"line":1,"column":353}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"i","original":{"line":19,"column":43},"generated":{"line":1,"column":361}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"maxVal","original":{"line":19,"column":48},"generated":{"line":1,"column":364}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"s","original":{"line":20,"column":4},"generated":{"line":1,"column":367}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"result","original":{"line":20,"column":9},"generated":{"line":1,"column":370}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"weights","original":{"line":20,"column":16},"generated":{"line":1,"column":372}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"i","original":{"line":20,"column":24},"generated":{"line":1,"column":380}},{"source":"../../../src/recurrent/matrix/softmax.js","name":null,"original":{"line":23,"column":2},"generated":{"line":1,"column":383}},{"source":"../../../src/recurrent/matrix/softmax.js","name":null,"original":{"line":23,"column":7},"generated":{"line":1,"column":387}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"i","original":{"line":23,"column":11},"generated":{"line":1,"column":391}},{"source":"../../../src/recurrent/matrix/softmax.js","name":null,"original":{"line":23,"column":15},"generated":{"line":1,"column":393}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"i","original":{"line":23,"column":18},"generated":{"line":1,"column":395}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"m","original":{"line":23,"column":22},"generated":{"line":1,"column":397}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"weights","original":{"line":23,"column":24},"generated":{"line":1,"column":399}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"length","original":{"line":23,"column":32},"generated":{"line":1,"column":407}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"i","original":{"line":23,"column":40},"generated":{"line":1,"column":414}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"result","original":{"line":24,"column":4},"generated":{"line":1,"column":418}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"weights","original":{"line":24,"column":11},"generated":{"line":1,"column":420}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"i","original":{"line":24,"column":19},"generated":{"line":1,"column":428}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"s","original":{"line":24,"column":25},"generated":{"line":1,"column":432}},{"source":"../../../src/recurrent/matrix/softmax.js","name":null,"original":{"line":30,"column":2},"generated":{"line":1,"column":434}},{"source":"../../../src/recurrent/matrix/softmax.js","name":"result","original":{"line":30,"column":9},"generated":{"line":1,"column":441}}],"sources":{"../../../src/recurrent/matrix/softmax.js":"import Matrix from './';\n\n/**\n *\n * @param {Matrix} m\n * @returns {Matrix}\n */\nexport default function softmax(m) {\n  let result = new Matrix(m.rows, m.columns); // probability volume\n  let maxVal = -999999;\n  for (let i = 0; i < m.weights.length; i++) {\n    if(m.weights[i] > maxVal) {\n      maxVal = m.weights[i];\n    }\n  }\n\n  let s = 0;\n  for (let i = 0; i < m.weights.length; i++) {\n    result.weights[i] = Math.exp(m.weights[i] - maxVal);\n    s += result.weights[i];\n  }\n\n  for (let i = 0; i < m.weights.length; i++) {\n    result.weights[i] /= s;\n  }\n\n  // no backward pass here needed\n  // since we will use the computed probabilities outside\n  // to set gradients directly on m\n  return result;\n}\n"},"lineCount":null}},"hash":"2bee14ba9a9b51064df0d724f09aeba2","cacheData":{"env":{}}}